class View

    constructor : (@action) ->
        template = JadeTemplates['templates/action']
        @view = template({'name' : action.name })

    make : ->
        hands.on @action.records, (=>
            next_view()
        ),
        kill_on_complete : true
        $('#view_wrap').empty()
        $('#view_wrap').html(@view)

    kill : ->
        return false


hands   = new HappyHands()
index   = 0
views   = []
actions = [
    name    : 'Uppercut'
    records : [[247.77,68.31,-15.79,-2.27,-9.82,-0.12],[239.84,62.23,-3.97,-2.68,-9.71,-5.08],[231.69,58.1,2.31,-3.86,-9.08,-2.77],[223.38,54.95,8.46,-0.52,-8.07,-4.68],[215.96,52.53,10.61,-0.41,-6.83,-1.22],[210.07,48.87,9.81,-0.72,-4.34,-3.01],[205.58,44.7,5.79,3.38,-3.35,-6.59],[205.24,41.43,-2.28,-0.1,-1.55,-4.57],[207.07,34.23,-10.6,2.46,-0.6,-8.81],[210.22,26.28,-17.78,1.24,1.29,-10.14],[215.4,15.94,-25.9,-0.8,3.28,-7.69],[218.6,2.7,-27.07,-1.42,3.27,-15.7],[224.3,-7.31,-30.9,-1.6,5.96,-11.04],[230.97,-18.05,-35.22,-0.17,7.68,-15.99],[244.72,-27.03,-35.04,-4.13,8.22,-12.41],[258.81,-33.15,-32.74,-4.55,9.27,-14.95],[286.35,-33.29,-19.93,-1.85,11.2,-11.45],[298.35,-30.39,-13.54,-1.83,10.54,-11.67],[307.87,-24.86,-9.23,-1.2,10.92,-10.39],[317.53,-17.99,-3.91,-2.42,9.96,-12.7],[324.33,-8.29,0.61,-4.3,8.45,-15.7],[329.07,5.42,5.25,-2.95,6.94,-12.44],[331.88,20.87,6.43,-4.36,3.91,-8.94],[332.96,33.88,8.56,-0.89,0.24,-4.04],[334.51,43.81,8.57,-3.03,-2.82,-1.36],[333.91,49.55,9.41,0.22,-3.62,-3.34],[337.61,56.24,7.02,-0.37,-5.99,-2.33],[343.09,58.13,5.03,-0.91,-7.87,-5.02],[345.55,57.73,5.82,0.7,-8.77,-6.95]]
,
    name    : 'Shoot'
    records : []
,
    name    : 'Slice'
    records : []
,
    name    : 'Punch'
    records : []
,
    name    : 'Slap'
    records : []
,
    name    : 'Slap a Ho'
    records : []
]


$ ->
    for action in actions
        view = new View action
        views.push view

    views[0].make()



window.next_view = ->
    if index < views.length - 1 then index++
    else index = 0

    views[index].kill()
    views[index].make()



window.prev_view = ->
    if index > 0 then index--
    else index = views.length - 1

    views[index].kill()
    views[index].make()